<!--
author: 许萍
date: 2015-11-20
title: PHP
tags: 编程规范
category: 编程规范
status: publish
summary: Wavephp框架，轻量PHP框架，MVC分离，快速开发项目
-->

### 目录
1. [文件命名](#m1)
	- [扩展名](#m1_1)
	- [命名规则](#m1_2)
	- [空目录索引](#m1_3)
2. [源文件编码规范](#m2)
	- [代码标记](#m2_1)
	- [排版](#m2_2)
		- [缩进](#m2_2_1)
		- [行长度](#m2_2_2)
		- [换行](#m2_2_3)
		- [空行](#m2_2_4)
		- [空格](#m2_2_5)
	- [注释](#m2_3)
		- [文件头注释](#m2_3_1)
		- [块注释](#m2_3_2)
		- [单行注释](#m2_3_3)
		- [尾端注释](#m2_3_4)
		- [文档注释](#m2_3_5)
	- [命名](#m2_4)
		- [通用规则](#m2_4_1)
		- [命名规范表](#m2_4_2)
		- [其他命名规范](#m2_4_3)
	- [括号](#m2_5)
		- [大括号](#m2_5_1)
		- [圆括号](#m2_5_2)
	- [引号](#m2_6)
	- [其他细节](#m2_7)
		- [变量赋值](#m2_7_1)
		- [兼容性](#m2_7_2)

<a name="m1"></a>
## 1. 文件命名

<a name="m1_1"></a>
#### 1.1 扩展名

Php文件扩展名一律为.php.

<a name="m1_2"></a>
#### 1.2 命名规则

可独立运行的程序文件，统一用小写的英文字母、数字和下划线的组合，如：user_login.php。
函数库和类库程序只能被其他程序引用，而不能独立运行。其中不能包含任何流程性的、不属于任何函数或类的程序代码。

<a name="m1_3"></a>
#### 1.3 空目录索引

在所有不包含普通程序(即能够被URL直接调用的程序)的目录中放置一个1字节的index.html文件，内容为一个空格。以避免当http服务器的Directory Listing打开时，服务器文件被索引和列表。

<a name="m2"></a>
## 2. 源文件编码规范

<a name="m2_1"></a>
#### 2.1 代码标记

纯php文件，统一使用<?php 尾部省略的方式，采用utf-8编码，第三方库采用原编码。

<a name="m2_2"></a>
#### 2.2 排版

<a name="m2_2_1"></a>
##### 2.2.1 缩进

程序块要采用缩进风格编写，缩进的空格数为4个，即1个TAB等于4个空格的方式

<a name="m2_2_2"></a>
##### 2.2.2 行长度

尽量避免一行的长度超过80个字符，长表达式要在低优先级操作符处划分新行，操作符放在新行之首，划分出的新行要进行适当的缩进，使排版整齐可读。

不允许把多个短语句写在一行中，即一行只写一条语句。

<a name="m2_2_3"></a>
##### 2.2.3 换行

当一个表达式无法容纳在一行内时，可以依据如下一般规则断开之：

在一个逗号后面断开

    someMethod(longExpression1, longExpression2, longExpression3, 
    　　　　　　　　　　　　　longExpression4, longExpression5);

在一个操作符前面断开

宁可选择较高级别的断开，而非较低级别的断开

    $longName1 = $longName2 * ($longName3 + $longName4 - $longName5)
    　　　　　　　　　　　　+ 4 * $longname6; // 使用这种缩进方式
    $longName1 = $longName2 * ($longName3 + $longName4 
    　　　　　　　　　- $longName5) + 4 * $longname6; // 避免这种
    

新的一行应该与上一行同一级别表达式的开头处对齐

if语句的换行通常使用8个空格的规则，因为常规缩进(4个空格)会使语句体看起来比较费劲。比如：

    //不要使用这种缩进方式
    if ((condition1 && condition2)
    　　|| (condition3 && condition4)
    　　||!(condition5 && condition6)) { //错误的换行方式，没有进行缩进
    　　doSomethingAboutIt(); //条件与此句对齐，造成阅读程序时很可能漏过此句
    }
    //应该使用这种缩进方式
    if ((condition1 && condition2)
    　　　　|| (condition3 && condition4)
    　　　　||!(condition5 && condition6)) {
    　　doSomethingAboutIt();
    }

<a name="m2_2_4"></a>
##### 2.2.4 空行

空行将逻辑相关的代码段分隔开，以提高可读性。

下列情况应该总是使用两个空行：
- 一个源文件的两个片段(section)之间
- 类声明声明之间 

下列情况应该总是使用一个空行：
- 两个方法之间
- 方法内的局部变量和方法的第一条语句之间
- 块注释或单行注释之前
- 一个方法内的两个逻辑段之间，用以提高可读性 

<a name="m2_2_5"></a>
##### 2.2.5 空格

下列情况应该使用空格：

一个紧跟着括号的关键字应该被空格分开，例如：
while ( true ) {
...
}

注意：空格不应该置于方法名与其左括号之间。这将有助于区分关键字和方法调用。

空白应该位于参数列表中逗号的后面

所有的二元运算符，除了"."，应该使用空格将之与操作数分开。一元操作符和操作数之间不应该加空格，比如：负号("-")、自增("++")和自减("--")。例如： 

    $a += $c + $d;
    $a = ( $a + $b ) / ( $c * $d );
    while ( $d++ = $s++ ) {
    　　$n++;
    }
    printSize( "size is " + $foo + "\n" );

for语句中的表达式应该被空格分开，例如： 

    for (expr1; expr2; expr3)

强制转型后应该跟一个空格，例如： 

    myMethod( (byte) $aNum, (int) $x );

<a name="m2_3"></a>
#### 2.3 注释

<a name="m2_3_1"></a>
##### 2.3.1 文件头注释

    /**
     * @name  名字
     * @abstract  申明变量/类/方法
     * @access  指明这个变量、类、函数/方法的存取权限
     * @author  函数作者的名字和邮箱地址
     * @category  组织packages
     * @copyright  指明版权信息
     * @const  指明常量
     * @deprecate  指明不推荐或者是废弃的信息
     * @example  示例
     * @exclude  指明当前的注释将不进行分析，不出现在文挡中
     * @final  指明这是一个最终的类、方法、属性，禁止派生、修改。
     * @global  指明在此函数中引用的全局变量
     * @include  指明包含的文件的信息
     * @link  定义在线连接
     * @module  定义归属的模块信息
     * @modulegroup  定义归属的模块组
     * @package  定义归属的包的信息
     * @param  定义函数或者方法的参数信息
     * @return  定义函数或者方法的返回信息
     * @see  定义需要参考的函数、变量，并加入相应的超级连接。
     * @since  指明该api函数或者方法是从哪个版本开始引入的
     * @static  指明变量、类、函数是静态的。
     * @throws  指明此函数可能抛出的错误异常,极其发生的情况
     * @todo  指明应该改进或没有实现的地方
     * @var  定义说明变量/属性。
     * @version  定义版本信息
     */
    
    建议注释规范
    	@param
    	@return
    	@author 如果是修改，可另起一行，然后 @author Joe 2012-09-27
    	/**
    	 * 接口1
    	 * 
    	 * 简单说明
    	 * 
    	 * @param array $a	参数1
    	 * @param array $b	参数1
    	 * @return boolean | array(
    	 * 		key => array(...,),
    	 * 		key => array(...,),
    	 * 		key => array(...,),
    	 * 		...
    	 * 	 )
    	 */
    

<a name="m2_3_2"></a>
##### 2.3.2 块注释

    /**
     * 这里是块注释
     */
    

<a name="m2_3_3"></a>
##### 2.3.3 单行注释

单行注释之前应该有一个空行。

<a name="m2_3_4"></a>
##### 2.3.4 尾端注释

极短的注释可与它所要描述的代码位于同一行，但是应该有足够的空白来分开代码和注释。

    if ($a == 2) {
    　　return TRUE; //对单一条件的说明
    } else {
    　　return isPrime($a); //其余的条件 
    }

<a name="m2_3_5"></a>
##### 2.3.5 文档注释

文档注释描述php的类、构造器，方法，以及字段(field)。每个文档注释都会被置于注释定界符/**...*/之中，一个注释对应一个类或成员。该注释应位于声明之前。

<a name="m2_4"></a>
## 2.4 命名

<a name="m2_4_1"></a>
#### 2.4.1 通用规则

类的命名采用第一种，类中函数的命名采用第二种。

(1)、Pascal 规则

每个单词开头的字母大写(如 TestCounter).

(2)、Camel 规则

除了第一个单词外的其他单词的开头字母大写. 如:testCounter.

<a name="m2_4_2"></a>
#### 2.4.2 命名规范表

|  标识符 | 规则  | 示例  |
| ------------ | ------------ | ------------ |
| 类名/接口名/类文件/接口文件/函数/方法 |  Pascal 每个单词开头的字母大写 |  Class UserAction{…}<br>FunctionName();<br>ClassName, InterfaceName |
| 全局变量 | Pascal：全局变量前缀为g | $gGlobalVarName |
| 局部变量 | Camel：除了第一个单词外的其他单词的开头字母大写 | $userCount |
| 常量（const,define） | 大写、下划线 所有define的路径值均不以/结尾，如define('WEB_ROOT' , '/mnt/develop/webroot'); | CONST_VAR_NAME , DEFINE_VAR_NAME |
| 实例变量 | 大小写规则和局部变量相似，除了前面需要一个下划线 | $_customer = new Customer(); |

<a name="m2_4_3"></a>
#### 2.4.3 其他命名规范

1）应该避免使用与常用关键词冲突的标识符。

2）方法前缀

is - 含义为问一个关于某样事物的问题。无论何时，当人们看到is就会知道这是一个问题。 

get - 含义为取得一个数值

set - 含义为设定一个数值

3）缩写词不要全部使用大写字母

无论如何，当遇到以下情况，你可以用首字母大写其余字母小写来代替全部使用大写字母的方法来表示缩写词。

使用:  getHtmlStatistic. 

不使用: getHTMLStatistic.

<a name="m2_5"></a>
## 2.5 括号

<a name="m2_5_1"></a>
#### 2.5.1 大括号

if、for、do、while等语句的执行语句部分无论多少都要加括号{}

使用传统的UNIX的括号规则，首括号与关键词同行，尾括号与关键字同列： 

    if (condition) { 
    　　...
    } else {
    
    }

<a name="m2_5_2"></a>
#### 2.5.2 圆括号

含有多种运算符的表达式中使用圆括号来避免运算符优先级问题

    if ($a == $b && $c == $d) // 错误
    if (($a == $b) && ($c == $d)) // 正确

如果一个包含二元运算符的表达式出现在三元运算符" ? : "的"?"之前，那么应该给表达式添上一对圆括号。例如：

    (x >= 0) ? x : -x;

<a name="m2_6"></a>
## 2.6 引号

在绝大多数可以使用单引号的场合，禁止使用双引号。

<a name="m2_7"></a>
## 2.7 其他细节

<a name="m2_7_1"></a>
#### 2.7.1 变量赋值

免在一个语句中给多个变量赋相同的值。它很难读懂。例如：

    $fooBar.fChar = $barFoo.lchar = 'c'; // 错误

不要使用内嵌赋值运算符试图提高运行时的效率，这是编译器的工作。例如：

    $d = ($a = $b + $c) + $r; // 错误

应该写成

    $a = $b + $c;
    $d = $a + $r;

<a name="m2_7_2"></a>
#### 2.7.2 兼容性

以PHP5.2版本为准，不兼容PHP4。

除非必要，不要使用PHP扩展模块中的函数。使用时应当加入必要的判断，当服务器环境不支持此函数的时候，进行必要的处理。
